<!-- Boucle pour presenter tous les Items -->
<div class="container col-12">
  <div class="row justify-content-center">
    <% @book_cards.each do |book_card| %>
      <% user = User.find_by(id: book_card.user_id) %>
      <% book = Book.find_by(id: book_card.book_id) %>
      <div class="card col col-auto" style="width: 35rem; margin: 1rem 1rem 1rem 1rem;">
        <% if !book_card.book_picture_seed.nil? %>
          <img class="card-img-top" style="height: auto; width:100;margin-top:1rem; padding-bottom:33rem" src=" <%= book_card.book_picture_seed %> " alt="Card image cap"/>
        <% end %>
        <% if book_card.book_picture_seed.nil? %>
          <img class="card-img-top" style="height: auto; width:100;margin-top:1rem; padding-bottom:33rem" src="<%= url_for(book_card.book_picture.variant(resize: "300x300")) %>" alt=" Card image cap"/>
        <% end %>
        <div class=" card-body" style=" position: absolute;bottom: 0;padding-bottom:5rem">
          <h5 class="card-title" style="margin-top:10rem;"><%=book.title%></h5>
          <p class="card-text"><%=user.email %></p>
          <p class="card-text"><%= book_card.to_sell %></p>
          <p class="card-text"><%= book_card.book_condition %></p>
          <p class="card-text"><%= book_card.review %></p>
          <h6 class="card-subtitle mb-2 text-muted"><%= book_card.price %></h6>
        </div>

        <div class="d-flex justify-content-sm-center">
          <div class="row" style="position: absolute;bottom: 0;">
            <div class="col">
              <%= button_to "Consulter", book_card_path(book_card.id), method: :get , class: "btn btn-info align-self-center mx-auto" %>
            </div>

            <% if !current_user.nil? %>
              <% @user=User.find_by_id(book_card.user_id) %>
              <% if current_user.followed_users?(@user.id) %>
                <%= button_to "Ne plus suivre", follow_relationship_path(:id => book_card.user_id), :method => :delete, :class => "btn btn-info align-self-center mx-auto"%>
              <% else %>
                <%= button_to "Suivre", follow_relationships_path(:id => book_card.user_id), :method => :post, :class => "btn btn-info align-self-center mx-auto"%>
              <% end %>
              <% if book_card.user_id == current_user.id %>
                <div class="col">
                  <%= button_to "Effacer", book_card_path(id: book_card.id), method: :delete , class: "btn btn-danger align-self-center mx-auto"%>
                </div>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
